package day12

import (
	"fmt"
	"strconv"
	"strings"
	"testing"
)

var (
	lightInput = []string{
		"???.### 1,1,3",
		".??..??...?##. 1,1,3",
		"?#?#?#?#?#?#?#? 1,3,1,6",
		"????.#...#... 4,1,1",
		"????.######..#####. 1,6,5",
		"?###???????? 3,2,1",
	}

	largeInput = []string{
		"..?##?.?.??#???#? 3,7",
		"???.##??##???#??.# 1,1,7,1,1,1",
		"?#.??.??#.??#? 1,1,2,2",
		"?????.?#???? 1,2,1,1",
		"??##???.?.???. 6,1,2",
		"#??#.??.?.????.#?? 1,1,1,1,3,1",
		"??.??????.?#? 2,1,3,1",
		"??##?.??#? 4,3",
		"?#?.???#?????# 2,4,1,1",
		"#?#??.??##?#?#?#???? 3,13",
		"??????##??? 1,4",
		"??#????????#??. 7,1",
		"?????##???. 1,2,1",
		".??..???????## 1,1,7",
		"??#?#?.#??.? 1,1,1,1",
		"?.???????? 3,1",
		"??.??.#?#?#?###? 2,1,9",
		"???.?????? 3,1,1",
		"?#?#?#???.?#?.??#. 6,2,2,3",
		"?.??.#.??????? 1,1,3,1",
		"??#???..??#?.?#. 1,3,1,1,2",
		"??#?#???##?#?#??. 2,6,1,1,1",
		"???????#??.??. 1,2",
		"##??????????#?.????# 9,2,1,2",
		"#?#.#.????#???. 1,1,1,3,1",
		"?#????.???? 3,1",
		"??#??#?????#.??????? 9,1,2,3",
		"#?.?#???#?##???.#.? 1,10,1,1",
		"?..??.?????#??#?. 1,7",
		"?.?#????#?.? 2,4",
		".?#????.???? 2,1,1,2",
		"??#??.?#???.#?# 3,1,4,3",
		"??.?.??#???? 2,5",
		"??..###.?????#.? 1,3,1,1,1",
		"..??????#??? 1,7",
		"?.?#???#.???# 1,5,4",
		".??.?.#?#???#? 1,5,1",
		"?#?#??..??#. 1,1,1,3",
		"..??##???????? 7,3",
		"?#??#???#.??.?????#. 9,2,2,1",
		"?.??????..???#??# 1,1,3,7",
		"#?#??.?#?#?#??. 5,5",
		"??.?.?#.??#? 2,1,2",
		"???.????????#? 1,1,1,3",
		"?.#.?#??#?#???. 1,1,7,2",
		".??#.#?#???#???. 3,5,2,1",
		"???.?#??#???? 2,6",
		"???##???#?????. 1,7,1,1",
		"??????#??#?###?..??? 1,11",
		"???????#.? 1,4",
		".?????.??. 1,1,1",
		"?#???.?..??##?#?.? 1,1,1,7",
		"????.??#??.? 1,1,4",
		"#..?.??.??? 1,1,3",
		".?#????..??#?? 6,3",
		"??.??????#?? 1,5",
		"????#???.? 1,6",
		"#???#???#. 1,3,1",
		".??????.???##?. 2,6",
		"??#?????????.?? 1,2,2,2,1",
		"?.????.??.##??? 2,3",
		"???#???.???.?.#. 5,1,1,1,1",
		"??#??#???.#? 6,1",
		"?..#.??###?#???? 1,9",
		"..??.?#??.????#? 2,1,1,3,1",
		".???#?##?????? 1,6,2",
		".#????.??? 1,3",
		"???#????#???. 2,6",
		"??#???#????#?..?#?#? 2,3,4,3",
		".??.?????#?????###?# 1,1,1,3,6",
		"?.??#?..????? 3,4",
		"??#..???.? 2,1",
		"?###???#???#? 5,4,1",
		".?##?##?.?###. 6,3",
		"?????.#????. 1,1,1,5",
		"..???????#.???#. 1,3,1,2",
		"???#?..??#????.???? 1,3,6,1",
		".#?????#?? 1,5",
		"?????.????#?? 2,1,1,3",
		"???.???.??#?#?? 2,1,1,6",
		"??????#???.#?????# 2,3,2,1,3,1",
		"??#?#?#?????#?.# 1,1,8,1",
		"???###??.#?? 1,4,1,1",
		"?#???..?..?.? 5,1",
		"??.?.???#?#. 1,1,3,1",
		".##??#?#?.????# 2,5,3",
		"#.??#?.??## 1,3,4",
		"..??..?.??.#.?#??#? 2,1,2,1,4",
		".?#??#?#?#?? 2,6,1",
		".?##.?.?#? 3,1",
		"?????#?..#??.##? 7,1,1,2",
		"?????..?????#???? 3,3,2",
		".????.??#?? 3,2",
		"????.?.????? 1,1,1,1",
		"?#.???.?#?.??.#? 2,1,3,1,1",
		".#????##???# 2,4,1",
		"????#.?.?#?#? 1,1,5",
		"??????????# 4,1,2",
		".?.?#????#?#??. 1,6,2",
		"???#???#???# 1,3,1",
		"#??#??#??? 2,4,1",
		"???.?##?#?.?..??.. 1,1,2,1,1,2",
		".?.#??##?##? 1,2,6",
		"??#.?.?#???#.?# 1,1,5,2",
		".??..????#??#??.??? 2,3,1,2,3",
		"?.#????#???.. 1,5",
		"?#?##??..?????#. 5,1,3,1",
		"??????.?#??#???. 4,1,7",
		"????##??.##??#?##?? 3,9",
		"?#??.??????? 3,1",
		"?.?????#?#???? 5,3",
		"?..???.#??? 2,3",
		"????#???#.??#?# 1,5,2,1",
		"?###??#???#??.?#??? 12,2",
		"??#??#????????#?. 5,7",
		"????#.##???? 1,1,2,1",
		"...???????????#??.? 2,1,4",
		"??????????##??? 1,11",
		"#..???.?#? 1,1,2",
		"?#?????#?????? 4,2,2,1",
		"??????.###???? 1,3,4,1",
		".?.?????#??#?. 1,5,2",
		"???.??.?.. 1,1",
		"???????#..??#?#?? 2,2,1,5,1",
		".#????#??? 1,1,1",
		".???.????#??? 1,3",
		".???????#??? 1,6,1",
		".?.?????#??#? 2,3,1",
		"???????????.?.?# 9,1",
		"#????..?..#?#?# 4,1,1,3",
		"??#?.?#?#?#??#?????? 1,13",
		"??#.?.????#?# 1,2,1,1",
		"#???.????##??. 2,1,1,4",
		".####?????#.???##??? 10,2,3",
		"..??.???.? 1,1,1",
		"???????.#??#? 5,1,2,1",
		"..?##??#?? 3,1",
		"??????.?..##?####?.? 4,8",
		"#??.??????#???#????. 3,2,1,1,3,2",
		"#??#?#????.???. 1,3,1,1,3",
		".???.??.??#. 3,2",
		"#??#?#?#.??.?????.? 6,1,1,1,1,1",
		".???#??.?#? 4,2",
		"?#.??##????.# 1,6,1,1",
		".???####????.?.????? 11,3",
		".?.?#??..???##???#. 1,3,8",
		"?????.??????#?.?# 2,7,2",
		"??.#.#????#? 1,1,6",
		"..??.#??????? 1,2,1,1",
		"??.??#??#?. 2,1,3",
		".??????.?.? 2,1,1",
		"????##?????? 1,3,2",
		"???##.?#?#??#?#.?.? 2,2,3,1,1",
		"???.?#?..? 1,2,1",
		"#??????#?#???.?? 1,1,2,2,1",
		".##..??.#???.#? 2,1,4,1",
		".????????#??#?#???? 6,8",
		"???#????#??? 1,3,1",
		"?#???#????? 5,2",
		"???#.??????????##? 4,4,6",
		"?##??.???#.??#? 4,1,3",
		"????????#?.#???.. 6,4",
		"????#.?.???#?####? 5,1,1,7",
		"????????#??#??#?. 1,9",
		"??.????????#??.????? 2,1,6,2,1",
		"???.????????????#.? 2,1,4",
		"???#??#???#.?#??##.? 7,1,1,2,2,1",
		".?#.??##.??.??? 1,3,1,1,1",
		"?.?#.?#?.?.#? 2,1,1,1",
		"????#????#???.??.? 1,3,6,1",
		"##.??##.?? 2,3",
		"?????.???#. 2,1,3",
		"??...#.?????##?? 2,1,9",
		"????.?.?#. 3,1,1",
		"??.#??#?#?.?? 1,6,1",
		"???##??#?#???? 3,7",
		"???#????#?#? 2,4,3",
		"??????.?#?#?.?? 4,5",
		"??##?#?????#. 6,2",
		".???###?????#?#??? 12,4",
		"#.???.?????.?#?.? 1,1,1,2,3",
		"??#???????????#? 6,1,1,1",
		".???#???#?##???. 2,9",
		"..#????###??..#??# 1,1,5,2,1",
		"#?????#??#?##????..? 5,11,1",
		".???????.?. 1,1,1",
		"??...???????????? 4,1",
		"#??##??#??.?##? 8,1,3",
		"?..??.??????.? 1,1,6",
		".??#?.?#???? 1,2,1,2",
		"??????.????? 1,1,1",
		"?#???###?.#. 2,5,1",
		"#???.#??#?.##???? 1,1,5,3,1",
		"?###??##???.??#????? 9,5,1",
		"?##.??##?.?. 3,3,1",
		"?.???.#??????##.?#? 1,1,1,9,1",
		"..?#.?.????##?? 2,3,2",
		"?#?.?##.???? 1,2,1,1",
		".#?????#?##### 1,1,9",
		"??#..???#?#????????? 1,6",
		"#.??????##??#?#.??#? 1,5,7,1,1",
		".?.?#????#???????? 1,3,2,1,3",
		".#???.????# 4,1,2",
		"#???##??#????. 6,1,1",
		"?.???????.???? 6,1",
		"??#?#??#?..??????. 4,3,2,3",
		"???#?.??.? 5,1,1",
		"??.?#????? 1,1,1",
		"??????????#??.?.?# 1,1,1,6,1,1",
		".??#?#???#??# 1,1,2,5",
		"?#??##.??????? 5,6",
		"??.??.?????#?#????? 1,1,10",
		"..?????#.?.?..???? 6,2",
		"?##??#.???.#?#???? 6,2,3,2",
		"#?#?#?..??? 3,2,1",
		".#?#?##???.## 7,2",
		"#???..???#?#?????# 4,1,9",
		"?.?#????##?.???? 9,1,1",
		".????????? 2,2",
		"#????????????. 1,2,2,1",
		"??.???#.#?? 1,2,2",
		"?????????? 1,1,3",
		".?.?????#?? 1,2",
		"??#???.???#?##??#? 5,1,6,1",
		".#???.???? 4,1,1",
		".#??###???.????##??? 7,5",
		"#???#??#????.?. 1,4,1",
		"???##?##??????#?? 1,6,6",
		"???#?????#????#? 5,9",
		".?.?..?.???.#???. 1,3",
		"??#?.???.????? 2,3",
		".#?.##??#.?? 2,2,2,1",
		"#.??????????.?.? 1,4,2,1,1",
		"?.?####??????#.??? 11,1",
		".????.????? 1,2,1",
		"??#.?????##?##? 2,7,2",
		"?.??????????#?# 1,1,2,1,3",
		"????#.?#?###. 1,6",
		"???????#????#?? 1,1,4,2",
		".?#?#?#?????#. 9,2",
		"?.????#??.? 4,1",
		"?#?????.???#???.??? 1,2,1,3,1,3",
		"?#???????#?.#.????? 1,7,1,1,3",
		".#??.???.??#??????# 3,3,9",
		"#????..???#..#? 5,3,2",
		"?.?.#?????.?? 1,6,1",
		".??..#??#?. 1,1,3",
		"??###???#????##??? 10,3",
		"??#??#?#?#?..??#???? 9,4",
		"???#???????#? 4,6",
		"?.#.?##?.??????##?? 1,4,6",
		"??#???.?#??#? 2,1,6",
		"??????##??.????? 8,1,1",
		"?????#..?. 5,1",
		"##.???.?...?? 2,1,1,1",
		"????????##?#?# 1,7,1,1",
		"??????????????? 8,1,1",
		"???.??###? 1,1,5",
		"????????????????##.? 1,4,1,3,3,1",
		"??????????#?#? 1,3,4",
		".????.?.???#.???#?.? 4,1,4,2,2,1",
		".??#?#??#. 1,3,1",
		"??.##.???#?#?.?#. 1,2,2,1,2",
		"???#????#???.???#?? 4,2,1,3",
		".???.#?????..?? 1,6,1",
		"..#?#????.. 1,2,1",
		"??#?.?##?##? 4,5",
		"?#?.?.???? 2,1",
		"???????.#??#??#? 1,1,3,1,5",
		"??.?.#.?????#??? 1,1,1,4",
		"??#?.?#?????#?.??? 2,4,1,2",
		"??????.??##?#??#?. 2,10",
		"?????????#? 2,1,4",
		"..??#????? 3,2",
		"?????????###?? 1,7",
		"#.?????????..????## 1,3,1,1,1,4",
		"???#??.#.?.??? 1,3,1,1",
		"??????#?#.#???#? 8,1,1",
		"?#??????#? 1,3",
		".???.?.????##??#? 2,7",
		"?#??#?????.?# 1,2,1,1",
		"???#.#???#??.?##?.? 1,7,3",
		".?#?.#?.#?? 3,1,1",
		"##?##????????? 7,1,1",
		"..?#?###?????? 2,3,1,2",
		"???.??..????..#?#?? 2,1,4,5",
		".?.?????????? 4,1",
		".????#?#?.?. 1,3",
		"??#?##???.#??..? 7,2",
		"????#????? 1,6",
		".#??????##??#?.?#?. 1,10,2",
		"?#??#?.??#???.???#? 5,3,4",
		".????????#?????. 10,3",
		"??#???#??#?.? 6,1",
		"??.????#????#??? 1,1,4,1,1",
		"??.?.???##.? 1,5,1",
		"??.###????#??## 8,2",
		"???#???????.?????.? 9,1,1,1",
		".????#??#??#???## 4,1,6",
		"????..##?.?.?..???? 1,1,3,1,3",
		"?.??.?#?#.?#?##??#?? 1,2,4,6,1",
		".????#???..????# 1,4,1,3",
		"?##?.?.???#?#???.? 2,6,1,1",
		".??.??#???? 1,3",
		"?#?.?????#????##??? 1,11",
		"?#??##?#????? 1,5,3",
		".#?#.#.#.??#?#?? 1,1,1,1,7",
		"#?#???#?###?##??#? 3,9,2",
		"???.????##???????? 1,1,7,1",
		".?###?????.???##?#? 6,7",
		".#?#.#???#?????##?# 1,1,1,5,1,4",
		"?????????#?#?#??? 1,2,4,1,3",
		"?.???.#?#??? 1,3,1",
		"#?#??#??.#.#???.. 6,1,4",
		"?#????##?#????.? 10,2",
		"????#????? 1,3,1",
		"??.???.?.. 2,1",
		"?.#???#???????? 2,2,2,2",
		"?.?#??????#?. 1,7",
		".?????.??? 2,2",
		"?#??.??#?? 2,3",
		"?????#???.??.?..??. 1,1",
		"??..???##???.?. 1,7,1",
		"??#?????#. 1,1,4",
		"#.?#.?##.#????? 1,2,2,2,1",
		"??#??#?##.???# 6,2,1,1",
		"??#??????##. 6,2",
		".#???.##.?. 1,1,2",
		"??.?????#?.??#??#??? 2,1,2,7",
		"?.??#.??.?.?.??.?. 3,1",
		"??#??#.?#.#? 2,2,1,1",
		"?#?????#?.? 3,3,1",
		"??.#?.??#??.#??. 2,1,3",
		".???#?#??##.? 5,2",
		"..???#????###?#??#? 4,1,3,1,1",
		"?.???#?.????.?????. 4,2",
		".#??#?????# 1,1,2",
		".???#????#?? 1,8",
		"#????????.####? 1,1,1,1,4",
		"??##??????????? 9,2",
		"?.??#?#????? 4,2",
		"?..?????.?.#??? 3,1,3",
		"#??.?#???. 2,1,1",
		"?.#??????????? 1,7,1,1",
		"?.???.?#?#? 2,5",
		"???.?#???#??#??? 1,2,8",
		"???#??#?.?#???? 1,1,3,1,1",
		"???.?#?.?????#????## 3,2,2,4,2",
		"##.???.?#??? 2,1,1,3",
		"?.????.?.??.? 3,2",
		".??.?.?##????.???? 1,6,3",
		"???.?#???? 2,3",
		"?.???????. 1,2,1",
		".#???????#.???????. 3,2,5",
		"..??.???#?..???#???. 2,2",
		"???.??.#???##?#?? 1,2,1,6",
		"?#?????#?? 2,3",
		"??..??#??##?.?# 2,8,1",
		"????????##??#??.??#? 13,1",
		"???###.?##.??? 5,3,2",
		"??#..??.????.#?. 3,1,4,2",
		"?.?#?.??#? 1,2,4",
		"?#???#?#?.# 8,1",
		"?#?.??.???? 3,1,3",
		"??##????#?? 3,1,2",
		"?????????##??????? 1,12,2",
		"??#??##??????##??#?. 8,7",
		"??.??.???.? 2,1",
		"???..#???????? 1,6",
		"??.???##?? 1,5,1",
		"#?.???.?#.?#???.#?? 1,2,1,1,1,3",
		"??#????.?##?#???#?. 5,9",
		"...#.???????? 1,5",
		"?.?????????#?#????? 1,1,3,6,1",
		"##?.#??.????.??# 2,3,3,3",
		"??##????..??? 7,1",
		".??#.?.???.?.?#?..?? 3,1",
		"??#????##??.? 1,5",
		"#?????#.?#????.??? 1,4,1,2,1",
		"#??..???.??.#??#? 3,2,1,4",
		".?#??#?..#?.#? 6,1,1",
		"???##?#?#?.?# 3,4,1",
		"???.#.?..??.#.???# 3,1,1,1,1,2",
		"?.?.#.????? 1,1,2",
		"???.??????#?# 1,2,5",
		"????????.?????.?# 1,2,4,2",
		"???????????#??? 8,1",
		"?..#?.????#???##?# 1,1,10,1",
		"..####??..?? 5,1",
		"???#?###?#?.???? 9,1,1",
		".??.?????????..? 1,1,6",
		".?##?.?#.? 2,1",
		"#??#??.??#..?.??.?? 6,2,2,1",
		"??#??#?.?? 5,1",
		"..#####?#???????? 8,4",
		"?????#?#??.???# 6,1,2",
		"?#?#????####????##. 5,1,10",
		"??.??..?##??? 2,3",
		"?.?###...?#?#. 3,3",
		"?????????? 4,1",
		"##.?.?#.??#? 2,2,1,2",
		"??????#.??.#? 6,1",
		".?#???.??#?? 4,4",
		"????#???#?#?#??#???. 5,12",
		"?#..?.#???.??. 2,4,2",
		"#.??#?#??.?#?#??#. 1,4,1,4,1",
		"#.?..?.?#.?????????# 1,1,1,1,10",
		"?##??##????###???? 3,2,1,5",
		"?#??.#?????.???#?.?? 2,3,5",
		"?.??.????? 2,1",
		"??????##???.?? 2,2,1",
		"??.#???#??#??.??##.? 2,3,5,3,1",
		"?#?##????????? 5,1,1",
		"???##??##???##???.? 14,1",
		"??#.??????..## 2,1,1,2",
		".?#???.??? 2,3",
		".#????.???#.??#???. 3,3,5",
		"???.?#?#??#??..??? 1,9,2",
		"???#???????#???#??? 1,4,4,1,2",
		".?.?????????????#?.? 1,15",
		"??#?#?.?????..? 3,1,3",
		"???.??#?#?# 1,7",
		".??#??.???#.. 4,1,1",
		".??????.#????.????. 3,4,2",
		"??#.##.#.?.#??.??##. 2,2,1,1,1,3",
		"#.?.?..????? 1,1,1,2",
		"???.##?.#.?##???#??? 1,3,1,4,2",
		"##.??##??#. 2,3,1",
		"..???#???????.??.? 8,1",
		"#?.??.?????? 1,1,1,1",
		"?###.?..??.#???#? 3,1,1,1,2",
		"?#??????.?? 4,1,1",
		"??.???.?.? 1,1",
		"????????#???????.# 9,1,1,1",
		"???.?#?#?#??? 2,7",
		"#..??.?.?? 1,1,1",
		".??#????##??.????#? 9,5",
		"??????.???#?? 1,2,1,1",
		"..???..??#??#?#?? 1,9",
		"????.#..##??#? 3,1,6",
		"???????.... 2,1",
		"##.???..?? 2,2,1",
		"##??#???#????????#?. 5,4,5",
		".??..??#????? 1,1,2,1",
		".?????.##??? 3,3",
		"?????#??#?##? 3,1,5",
		".#????.??.??.?????. 1,2,1,2,1,1",
		"???.?.?#????..?##??? 1,1,1,1,3,6",
		"???##?#?????#? 1,2,4,1",
		"???##???????##??? 1,5,8",
		"?#???????##????## 5,1,8",
		"??.#?.?#?? 1,1",
		"?????????????? 1,3,1,4",
		"?#.???#??#?##???# 1,1,1,8",
		"???.????##?. 1,1,1,5",
		"?##..#???.??#. 3,3,1,1",
		"?#?##?.?????.??## 5,1,4",
		"?.???????.?. 1,1",
		".?.??.??## 1,1,2",
		"??#?????.?# 5,1",
		"?.?#.??????##.?#? 1,1,8,1",
		"?#???.?.???? 4,1",
		"???#?#??##??.?? 1,7,1",
		"???..#????#??#?? 1,10",
		"???????#???????##.# 2,1,2,1,6,1",
		"?.?#??#.???? 1,1,2,1",
		"..??##?.#???#??#??? 1,2,2,3,1,1",
		"???????#?.##?# 8,2,1",
		"?????..??? 2,1,1",
		"#??.#.??#?# 1,1,3",
		"??#?#?#???#.? 6,1",
		"??#????##????? 4,5,2",
		"???#??#??#.?#?##??? 2,7,5,1",
		".????#???? 4,1",
		".####?##?#??.#? 9,1",
		"?????.?#?####? 2,8",
		"?.?????#??#???#??? 1,1,1,1,6,1",
		"?#?????#?#????? 3,3,1,3",
		"##??#..?#?.???. 5,2,3",
		"??##?????? 1,4,2",
		"#?.???.?#?#? 1,1,1,1",
		"#.??????????#????#?? 1,2,8",
		"?#?#???#?? 3,1",
		"??#?##??????#.???. 11,1",
		"??..##???? 1,2,1",
		"????#??#?????#???? 2,1,9,1",
		"#???#???.???#??? 1,2,1,1,3",
		"?#??????#.???? 6,1,2",
		"???????????? 1,1,1,2",
		"???.??????.??? 1,1,1,2",
		"?.#???.???##.?.? 3,5",
		"#?????#?##?#??#????# 13,2,2",
		"?.??????.??#? 1,1,2,1",
		".??.???#??##?#? 1,1,1,6",
		"???????????. 6,1",
		".????.????#.. 3,4",
		"?.?#?????#?? 4,2",
		"?#?#???????#?#?????? 10,1,1,2,1",
		"???????????? 1,1,5",
		"?????????# 1,5",
		"..?#?###.##.??# 6,2,2",
		"??#????##?#???? 2,3,3",
		"#?#?????.??#?#? 1,2,6",
		".#??.#.???????.?..?? 1,1,1,7,1,1",
		"????#??##??#?#?#?# 3,1,5,1,1,1",
		"??..???####???????? 1,7,1,1,1",
		"???...#.?? 2,1,1",
		".?.??#?..#???#?.??#? 3,6,2",
		"?#??????#?? 5,1",
		"?#??..????#?#???? 3,7,1",
		"??.???#?.? 1,2,1",
		"???#??.???#??? 3,1,2",
		"???##???????#?. 1,3,1,3",
		"???#?????#?..#?#? 1,5,3,3",
		"??.?.?#?#??##?#? 1,1,4,4",
		".###???????#?# 3,8",
		".#??.?.???#?# 3,1,4",
		"#?.???.???#. 2,1,2",
		"##??#?.??. 2,2,2",
		"#...???#?##?..#? 1,1,1,3,1",
		"?..?#?#?#?.?????? 6,4",
		"#?#????#????#.?.??? 1,9,1,1,2",
		"#..??#.?????#???##? 1,3,3,7",
		".????.???#??###?? 1,8",
		"?##?#????#? 3,2,2",
		"????.??..#? 1,1",
		"?.????###????? 1,6",
		"??#?#.???#?#?? 4,3",
		"?##?#??#?..???.#?. 8,2,2",
		"?.#????#????#?.#???# 1,2,3,4,2,1",
		"?#?.#????. 2,3",
		".??##??###???# 10,1",
		"??#??##???...?? 6,1,1",
		"#?????.?..#.? 5,1,1",
		"?????#??????. 2,4,3",
		"????#????? 1,1,2",
		"?.?#???##? 1,1,5",
		"#????.?.?????? 4,1,4",
		".??????????? 1,3,2",
		"?.??????#??? 1,4,1",
		"?.?#?????? 1,3,1",
		"?.??.###???##????#?. 1,1,3,7",
		"?#??????#.#. 2,1,1,1",
		".?##?.?????##??## 3,10",
		"????.???#?? 1,2,1",
		"??#????.?#?? 6,2",
		"??.?.#?????.#.?? 2,1",
		"?.??.?#?#?? 2,1,1",
		"?##?.???#? 4,3",
		"?#??.???#?.?? 2,1,4,1",
		".???????????.# 1,3,4,1",
		"?#???.??#?????.? 1,2,1,6",
		"??#?#?#??.#??. 2,4,1,1",
		"??.?.??#???#?.??.?.? 1,1,6,2,1",
		"#.#?.#???#?#?????#? 1,1,14",
		".???.#???#??? 2,2,3",
		"##????????#??.?#..? 2,2,2,1,1",
		"?#???#?..?. 1,2,1",
		"??#???#?????#???.?? 3,5,4,1",
		"#??????????#?#?? 1,3,7",
		"?#???#??#?#?? 6,5",
		"??????????? 1,6",
		"#?????????????#? 1,2,6,2",
		"????#??.#.??#. 1,2,1,3",
		"?#????###?.?#.#??. 4,3,2,2",
		"#????#??##????? 1,1,8,1",
		"????.???????#?#? 4,8",
		"?????#??#???#?.?? 6,3,3,1",
		"?????.???..?#.??? 1,1,3,2,1",
		".?#??#?..???# 4,3",
		"???...###?. 1,4",
		"?#?.?????? 2,3",
		"#?..?????. 2,1,1",
		"????##???? 1,4,2",
		"????????##???#?? 1,1,1,8",
		"??.?..?##?.?#?##?.? 2,1,4,2,3,1",
		"????.???.? 1,2",
		"???????###? 2,5",
		"???.#?.#.?##?? 1,1,1,5",
		"?#????#???.?.? 9,1,1",
		"????.??????##? 1,1,4",
		".???##.???..#? 5,3,1",
		"?#?##?#?###????????? 5,1,7,1",
		"#..#?.?#????##. 1,1,1,1,3",
		"?.???#???????#???# 4,4,2,3",
		"??.?.??###???????? 1,11",
		"????#?????.??? 2,2,3,1",
		".?????????####...? 3,6",
		"##??#?##??..??# 10,2",
		"????#?#??.#??? 8,3",
		"#.?????.??#?##?#? 1,1,1,8",
		"#?.??####????.???#? 2,6,1,3",
		"?#?????#.??? 3,2,2",
		"???.##?#.?????????? 3,2,1,1,2,4",
		"??##?##?????..??? 10,1",
		"??.???????#??????? 4,8",
		"###?.???#??? 4,1,2",
		"##????#??#. 4,2,1",
		".?#?#???.??###?#??# 4,2,1,3,1,1",
		"??????.?..#?.??# 2,2,2,3",
		".???????#?. 2,5",
		"#?#??????? 4,2,1",
		".#?.???#??#??????#.? 2,11,1,1",
		"??.????..##??..?### 1,3,2,1,4",
		"???.?????#??? 1,6,1",
		"???.?#??#? 1,4",
		"#??.?????#?. 3,6",
		"??#.#??.??????###? 1,3,8",
		".???.#????.??? 1,1,5,2",
		".#??????????? 1,2,2,4",
		"#..?#??#??? 1,8",
		"????#????? 1,1,5",
		"?.???.?????.?????#? 2,4,7",
		"#.?..?##??..??#??? 1,1,4,1,1,1",
		".???????#????. 2,8",
		"###?..#.??????.?? 4,1,1,1,2",
		"???.??.?### 1,4",
		"???#.?#??.???. 2,4,2",
		".?#????#?.#???? 1,4,1,1,1",
		"?.??##??#??? 4,5",
		"##????#?#?. 2,4,1",
		".???#?#??#??#?.#?#? 10,4",
		".?#?#???.?#.??# 2,1,1,1,1",
		"??.?????#..#??.??? 1,3,1,1,1,1",
		"?...#?#?????????.. 4,3",
		".?#??????#???#?##.?? 11,4,1",
		"?#???##...?.?????.?? 6,1,3",
		"?#?.?#?#?? 2,1,2",
		"?????##??#.????.???? 8,2,1",
		".???????#????##???.? 7,1,6,1",
		"??##?????# 5,2",
		"??##..#.?. 4,1,1",
		"????##???? 1,2,2",
		"???#????#?##???#??? 12,1,1",
		".???????#??.??? 8,3",
		"?#?.##????? 1,7",
		"??????.?.?# 4,2",
		"??#???.#?#?#??? 1,1,1,3,1",
		"???#???#?#???. 1,1,4,1",
		".???#?????#?..#???.# 4,5,1,1,1",
		"???.??.#???#?. 1,2,1",
		"..????.??##?? 1,6",
		"??#?.?.?#??.??#. 1,1,1,2,3",
		"#????.?#????#???#?. 1,1,1,4,1,1",
		"????????????. 6,1",
		"??.??#??#????.????# 2,7,5",
		"#???????###.?.????. 1,1,6,3",
		"???#?#???#?###? 6,7",
		"????.#?#.??#?.???.? 1,1,3,3,2",
		"#?????.???#???? 5,5",
		"#??#??.#.?????#?. 1,2,1,7",
		"?????#???. 5,2",
		"????????##???.??.? 2,6,1",
		"#?????????? 3,2",
		".??#????..??????#?? 2,1,7",
		"????????#?##?? 9,2",
		"#?.??????.??? 1,3,1,2",
		"?????.????#?.?? 2,1,1,2,1",
		"#???.??#???? 1,1,3,1",
		"????.??#?. 4,1",
		"???????#.???????? 6,5,1",
		"??.???#??#??????. 1,7,3",
		"???#??##??#????????? 1,13",
		".#?????????.#???.? 6,1,1,2,1",
		"?????????.. 2,1",
		"??????#????? 1,2,2",
		"#?#????..????#?? 1,4,1,2",
		"?.?.?#????#. 1,1,2,3",
		"#??###??.?#????#???? 8,8",
		".#.?#????# 1,1,4",
		"?#???#????? 1,6",
		"????.?#???#.?. 2,2,3,1",
		"??.?#?#????? 2,1,3",
		"##???.??.?##????. 2,1,2,4,1",
		"?????#?..?#?#?. 5,3",
		"??#????#????. 10,1",
		"????????????#.?? 1,2,6,1,1",
		"#.?#??.???? 1,2,4",
		"#..???#??? 1,4,1",
		"?????#????#? 4,2",
		"???.##???.. 1,3",
		"?.##?#.?????.?. 4,3,1",
		"??##??.?.??# 4,1,3",
		"?#???#.?.??#??.??. 2,3,1,1,2,1",
		"#??##????#???. 10,1",
		".??###?#???#?##?.#.? 14,1",
		"?###???????????? 3,1,1,1,2",
		"#?.???????.???#? 2,1,4,4",
		"?#???#???? 1,3,1",
		"????#?#????# 1,5,1",
		"???###????????? 9,1",
		"??????????#????????. 2,10,2",
		"?#.??##???.?? 2,3,2",
		"#?.???.??##? 1,1,1,4",
		"???#???####???????# 11,1,1",
		"##?.#??.?????.?#??#? 3,2,5,1,2",
		"#?.??????###.?#?# 1,9,2,1",
		"??#??##??.#####?. 9,6",
		"?#?.???#?#.?????? 3,5,1,1,1",
		"???##.#???####?.?? 3,9",
		"????.?.###??.?#?? 2,1,3,1,4",
		".?#??.?####.# 4,5,1",
		".????.?????#?? 1,3,1",
		"?.##????.???#? 3,1,4",
		"????.###?????.? 2,4,3,1",
		"?.?#.?#?????#??? 1,1,8,1",
		"?#?????????.????? 2,5,2",
		"..#????#?#?..#?????# 1,7,2,2",
		"#????..???#??# 1,1,7",
		"???.??.?#?.?? 3,1,2,1",
		"?#??#?#??##?#??#?. 3,1,11",
		"????#?#?###? 1,8",
		"?#????.???#.? 4,1,1",
		".?#??????????. 1,2,5",
		".??#??#??. 2,2",
		"???###?????#???#??#. 7,2,4",
		"??.???.?.????? 2,2",
		"???#??#??# 1,7",
		"???#?.??.????#?##??. 4,2,10",
		"#??.??#??????#???# 2,1,8",
		"????#?????#????#? 1,5,1,4",
		"?.#?##??????? 1,5,1,1",
		"#??.?#??????? 1,6,1",
		"?..?##??######??.?? 1,11,1",
		"??#??#.?#?#???????? 1,4,2,1,2,3",
		"??????????##???.. 2,4",
		".???????#.#? 1,1,2,2",
		"???????#??##.? 1,1,1,5",
		"???.??#??? 1,5",
		".#?#.?#?#?# 3,4,1",
		".?#?.??.?#???? 2,1,2",
		".?.#?#????#???? 3,3,1",
		"#?????????#..##?#? 1,2,1,1,4",
		"??##??????.?? 4,1,1",
		".??????#?#? 3,4",
		"?#.?.?..?#?. 2,2",
		"?#??.?#?#??.??????# 2,2,2,1,1,2",
		"?##???##??????..# 8,5,1",
		"??.?#?????????#?? 2,1,9",
		"????.???.. 1,1,1",
		"???#?.???? 3,1",
		"??.??????#???????? 2,6",
		"??#???##???.#?#?. 3,5,4",
		"##???????? 3,2,2",
		".??#????#?? 2,4",
		"??????.??# 2,2,2",
		"##..#??..??#???. 2,2,6",
		"..?.#?#??.???????? 3,6",
		"##??????#??????? 2,1,1,6",
		"???#??..???? 4,2",
		".?#?#??..?????.?? 4,3",
		"#??#????.#?? 8,1",
		".???##.??.?? 4,1",
		"??????#??##?????? 2,13",
		"##???..?.?? 5,1",
		"?.?#?#???..##? 1,6,3",
		"??.????#.?#??# 1,4,1,1",
		".#?????????#??.??#?. 5,5,2",
		"??.?..#.#??? 1,1,2",
		"??#?.?#??###??? 4,8",
		"??#??#?##???. 2,8",
		"#.#????#???? 1,1,1,1",
		"#???##?#??#??#????? 2,8,1,4",
		"?????????#??## 1,10",
		"??#???#???#??????. 1,15",
		"?###??.??????## 5,3,4",
		"?#???#?.?? 6,1",
		"?.????.???#?###???? 1,8",
		"?##??????..???? 3,1",
		"??##??#..?#?. 5,1",
		".###?????#?? 6,2,1",
		"??.#??.#?#. 2,1,1",
		".??.?##???##.#???# 1,8,2,1",
		"?#?#????.##????? 4,3,2,1",
		"?????????.??.? 3,1",
		"##?.???????#???#? 2,10",
		"??#..#???#???#?. 1,1,7",
		"?.#?#..?##?..?? 3,3",
		"??#???????#??#. 1,1,7",
		"#..?.#???#??# 1,1,2,5",
		".????##???. 1,6",
		"???#???.???#???? 4,5",
		"??##????#. 3,1",
		"??.?#.??.?. 1,1,1",
		".??.????#??? 1,1,1,1",
		"?.###?.????.? 4,2",
		"???##????.?.?.?.?##? 4,1,1,1,4",
		"???##?#??#?#.# 1,5,3,1",
		"?.?????#?????? 1,1,4,1",
		"..#??##?#?.?#?.? 7,3",
		"#..??#????????????? 1,3,2,4,1",
		"?#.?#??.#?#?????? 1,4,5,1",
		"#???????##..#????? 10,6",
		"..???.#??? 2,2",
		"??#??.?.#??. 2,2",
		"?.?#??.?.?#..?? 3,2",
		"???#?????? 3,3",
		"????????.????..?# 3,2,1,1,1",
		"?????????#?.# 1,1,4,1",
		"#?#.?..?#?.?. 3,2",
		"???.??##????????. 2,9",
		"??#.#.????#.??? 2,1,1,2,2",
		"????.?#.??? 1,2,1",
		"#???????.???.?. 1,1,2,2,1",
		"???.????##????? 2,3,1",
		"?????..??#? 1,2,2",
		".#?.?#???? 2,1,2",
		"#?????????? 5,2,1",
		"???#?#?..?#????#??.. 6,9",
		".#???.?????#????. 1,2,4,5",
		"????.??.#???? 2,1,1,1",
		"#?.???##??? 2,1,2",
		"??.?###??.????#?.??? 1,6,4,1,1",
		"#?..?#?##?.? 2,5,1",
		"?????.#????.???# 1,1,4,1,2",
		"#?#??#????#????# 3,2,2,4",
		"???.?????####.##?.? 2,3,5,3",
		"??????..#.? 1,2,1",
		"#????.#???.#?##?? 2,2,5",
		".??.?#?###?????#??? 1,13",
		"?.??#.??????#?? 3,7",
		"#???.#.????#?.#?#??? 1,1,1,4,3,2",
		"????.#????. 3,1,1",
		"?.???????#??#??.?? 1,4,3,1",
		"#?.#???..??? 2,1,1,2",
		".?#?#????.? 2,5",
		"??##??#??# 7,1",
		"????##.??##?? 1,2,3",
		"???????????#??? 1,3,2,1,1",
		"??????##?..#?#??.?.? 9,1,1,1,1,1",
		".???.???.?? 1,1",
		"#?.??.?#???????..? 1,1,1,4,1,1",
		"?.?#?#?.???#?. 5,3",
		"?????????.??..#?.? 5,2,1,1",
		"?#???.???##?????? 3,10",
		"?##??.#?????#.??#? 4,4,2,1,2",
		".#.?.??.?? 1,1,1",
		"???#?.???.?.???? 2,3,2",
		"?#.?#??.?? 1,1,1",
		"#??##.?.?#?#?????# 1,2,10",
		"?.????###????.? 8,1",
		"?##???????? 4,4",
		"??.?.#?.?#?.###???#? 2,1,2,1,8",
		"?##?#??????.?.??#?# 6,3,1,1,3",
		"?.?.#??##???#?#? 1,1,5,1,1",
		"????.???#?#???#? 3,6,1",
		"..#??###??????### 6,7",
		".???????.??#. 1,1",
		"?#????????#???#??? 2,2,4,2",
		".#??#?#?????. 1,2,2,2",
		"??..?.?????##????. 2,1,3,2,1,1",
		"??.?#.?.#?? 1,1,2",
		"?????????? 7,1",
		"#??????.?..??????? 6,1,1,1,1",
		"??.#???#?????.?????? 1,8,1,1,1",
		".#.#????????. 1,1,5",
		"???#?#..##??## 4,1,3,2",
		".#???#????????.# 1,9,1,1",
		"?##???????? 3,1",
		"??#????#.#? 1,1,1",
		".??###.?#???#??#???? 5,3,6",
		".???#?#???####??#?? 7,8",
		"???.?.??????????? 1,10",
		"#.??.?.#?..# 1,2,1,1",
		"????#.??#... 4,2",
		"#?????..??.? 1,1,1,1",
		"#?????##???.? 1,1,3,1",
		"????????.??? 1,1,1,3",
		".??####?.?#??#??? 4,5",
		"?#?#???..? 1,2,1",
		"??#???????###??. 5,7",
		"?.?#?#?##?.?#?##. 7,4",
		"###.##????#???.?# 3,2,2,1,2",
		"..??#?..?#??.##?#?## 1,1,3,2,1,2",
		"?#????????????##???? 1,1,3,1,6,2",
		"???.?#??.??? 1,3,1",
		"???##???????.??##?? 4,1,2,4",
		".?.?.?#??## 1,5",
		"?.##??????.???.? 6,1,2",
		".?????.?###? 1,5",
		"????.?????. 2,1,1",
		"#?????.?????.#??.?#? 1,1,1,1,2,3",
		"????????.#?.. 6,2",
		"?.#???.????.?.??#? 1,1,2,1,1,2",
		"?#????#?#????#?..?. 14,1",
		"#..??#?#???? 1,1,6",
		"?.?#?#?????? 4,1",
		"????##?#?.#?. 5,1",
		"?????###??.#?#??.? 1,7,5",
		"#??????.???? 1,1,1,3",
		"??#????????. 1,5",
		"...#??#..????. 4,1,2",
		"?#??#??#?.? 5,2,1",
		"??#??.?#??????????. 3,6,3",
		"?.#?#?????? 5,2",
		"???#???##?.??. 8,2",
		"..?.#??????.? 1,1,1",
		"???#.##??#? 3,5",
		"?.????#???????.#? 1,1,4,1,1",
		"?#?????.??? 2,2,2",
		"?.?#?.?????.?. 1,1,1,2",
		"?????.??????.??????? 3,2,1,1,1,2",
		"#?????#??..#??#??. 9,5",
		"..#?????.. 1,1,1",
		"?..???#??#?????#?#?? 5,4",
		"##??????##????.?? 13,1",
		"????##???#????. 1,6,1",
		"???.#?#??????# 1,4,2",
		".???.??### 2,3",
		"?.#??????####?#??? 1,1,1,1,7,1",
		"?.?#.?.?????##.? 2,1,1,3",
		"??#??.###?? 4,3",
		"..????#???????? 2,7",
		".??????????. 2,1,1,1",
		"?#.???#?#????? 2,1,4,2",
		"#?##???.?#.?.#. 5,1,2,1,1",
		"#.?#.?#?#? 1,1,4",
		"??.???##?. 1,1,3",
		"????#.???#?## 2,1,2,4",
		"???#?#?#??##??#??#? 1,15",
		"#?.????#?????.????#? 2,1,6,1,2",
		".?????.#??? 1,1,4",
		"#?.???###?#???. 1,1,8",
		"?.??#?#????????# 1,5,1,1,2",
		".????.???##?#.??#?? 1,1,7,3",
		".####.#??# 4,1,2",
		"?#?????.#.?.?## 2,1,1,1,3",
		"??#?.??????# 1,1,2,3",
		"????.#??????? 4,5",
		"#..???.?.???##.??? 1,3,1,1,2,1",
		".?#??..?.?##?????#? 4,1,2,2,1",
		"??#.??.?.??# 2,1,1,1",
		"#???#???????? 9,2",
		".?#.????#???? 1,2,2",
		"#.??.?#.???.??? 1,1,1,2,1",
		"?????##????.?.?? 10,1,1",
		"?????#?.#???.?????? 6,1,1,1,1",
		"?#???????. 1,1,1",
		"????#??????##???.? 2,1,2,2,1,1",
		"???.?##??????#???.? 3,3,7",
		"?.#?.???.#?? 2,1",
		"?..??#????.?.?..##?? 7,3",
		"?#?#?#?????????# 4,1,3,2,1",
		"?.#.#?.?????? 1,1,1,2",
		"#??.?##??..?????.? 3,4,2,1",
		"????.#????##??..?#? 3,1,3,1,2",
		"??#?..???#?? 3,1,1",
		"???..?#???### 3,1,1,3",
		".??????..???## 5,3",
		"##??????.???? 4,1",
		"?#????##?#?.???? 1,5,3",
		"..?##?#??????##.??#? 9,2,1",
		"..#??.?.??. 1,1",
		".???.?#???????#??? 1,5,1,1,1",
		".???.??#?? 3,3",
		"??#?##??#?.?#? 10,2",
		"?.???.???.?? 1,1,2,1",
		"????.????# 2,2,1",
		"??????.?????? 2,3,1",
		"??.?#..#?#??.?# 2,1,5,1",
		"?????#?.?#???..???? 2,3,2,1,1,1",
		"??.??####?##.??. 1,8",
		"?#????##?##.##??? 2,7,5",
		".#???#..???#?#???#?? 2,1,11",
		"?##??#?.????? 6,2,1",
		"#???.?#??..??? 1,4,2",
		"???????###? 4,3",
		"??.??#??## 1,1,5",
		"?.?#??.?#?#???. 2,6",
		"#??.?????#?##?#??? 1,1,1,1,9",
		"?#??#.??#??####??? 5,9,1",
		"#??.??????. 3,5",
		"#???#??#.??#? 1,6,1",
		".?.???##??.?#????. 5,3,1",
		"?#?##??????##???#??. 1,10,3",
		".?????????.?? 1,1,2,1",
		"?.???#???. 3,1",
		"????????#?#?? 5,4",
		"?.?????##.????#????? 1,1,2,1,5",
		"??#???#?#??.. 1,1,5",
		"??##??##?.#...??.?? 4,4,1,1,1",
		"?#??##?##?##?#???. 11,2,1",
		"?..????#???. 1,1,3",
		"????#???????. 3,2",
		"?###.?#??.???#.?#? 4,2,1,1,1,3",
		"?#?#?????.?#?? 7,1,1,1",
		"???????#???. 1,2,1",
		"#?##??#?..?#?.?# 7,2,2",
		"???#.#??.??#?. 3,3,4",
		".???..##?? 2,3",
		"#.?.?.?..??##?? 1,1,1,5",
		".?#??#??#? 2,1,1",
		"?#?##??.#??? 2,3,1,1",
		"#???#????.????????#? 6,1,3,4",
		".#..????????#? 1,1,1,3",
		"????.#??..??.? 1,2",
		"#??#..?#??#????? 4,1,5",
		"#?#????.????#.???. 7,1,1,1,1",
		".?????????? 1,2,1",
		"????#?.??? 1,3,1",
	}
)

type inputFragment struct {
	posInPattern int
	posInValues  int
}

type input struct {
	pattern       []byte
	values        []int
	cachedResults map[inputFragment]int
}

func match(solution []byte, values []int) bool {
	current := 0
	length := len(solution)
	for i := 0; i < length; i++ {
		if solution[i] == '#' {
			end := i + values[current]
			if end > length || (end != length && solution[end] != '.') {
				return false
			}
			for i < end {
				if solution[i] != '#' {
					return false
				}
				i++
			}
			current++
		}
		if i < length && solution[i] == '?' {
			return false
		}
	}
	if current == len(values) {
		// fmt.Printf("%s\n", string(solution))
		return true
	}
	return false
}

func valid(partial []byte, values []int) bool {
	current := 0
	length := len(partial)
	for i := 0; i < length; i++ {
		if partial[i] == '#' {
			if current == len(values) {
				return false
			}
			end := i + values[current]
			if end > length || (end != length && partial[end] == '#') {
				return false
			}
			for i < end {
				if partial[i] == '.' {
					return false
				}
				i++
			}
			current++
		}
		if i < length && partial[i] == '?' {
			return true
		}
	}
	return true
}

func (s input) Permutations() int {
	choice := -1
	depth := -1

	length := len(s.pattern)
	toMatch := 0
	for i := 0; i < length; i++ {
		// Start of '##...'
		if s.pattern[i] == '#' {
			if toMatch == 0 {
				depth++
				toMatch = s.values[depth] - 1
				continue
			}
			toMatch--
			continue
		}
		if s.pattern[i] == '?' {
			choice = i
			break
		}
	}
	if choice == -1 {
		if match(s.pattern, s.values) {
			// fmt.Printf("%s\n", string(s.pattern))
			return 1
		}
		return 0
	}
	nextFragment := inputFragment{
		choice,
		depth,
	}
	if res, exists := s.cachedResults[nextFragment]; exists && s.pattern[choice-1] == '.' {
		return res
	}

	newInput := s.pattern
	newInput[choice] = '#'
	var permHash, permDot int
	if valid(newInput, s.values) {
		permHash = s.Permutations()
	}
	newInput[choice] = '.'
	if valid(newInput, s.values) {
		permDot = s.Permutations()
	}
	newInput[choice] = '?'
	if choice > 0 && depth >= 0 && newInput[choice-1] == '.' {
		s.cachedResults[nextFragment] = permDot + permHash
	}
	return permDot + permHash
}

func parseLine(line string, multiplier int) input {
	parts := strings.Split(line, " ")
	values := strings.Split(parts[1], ",")

	pattern := strings.TrimSpace(parts[0])
	vals := make([]int, 0, len(values))
	for _, v := range values {
		i, err := strconv.Atoi(strings.TrimSpace(v))
		if err != nil {
			panic(err)
		}
		vals = append(vals, i)
	}
	lineInput := input{
		cachedResults: make(map[inputFragment]int),
	}
	for i := 0; i < multiplier; i++ {
		lineInput.pattern = append(lineInput.pattern, []byte(pattern)...)
		if i != multiplier-1 {
			lineInput.pattern = append(lineInput.pattern, '?')
		}
		lineInput.values = append(lineInput.values, vals...)
	}
	return lineInput
}

func computePermutations(data []string, multiplier int) {
	num := 0
	for _, line := range data {
		lineInput := parseLine(line, multiplier)
		perm := lineInput.Permutations()
		// fmt.Printf("Permutations: %d for %s - %v\n", perm, string(lineInput.pattern), lineInput.values)
		num += perm
	}
	fmt.Printf("Total permutations: %d\n", num)
}

func TestDay12Phase1(t *testing.T) {
	// 21
	computePermutations(lightInput, 1)
	// 6958
	computePermutations(largeInput, 1)
}

// 1		1		1		1		1
// 4		32		256		2048	16384
// 1		1		1		1		1
// 1		2		4		8		16
// 4		20		100		500		2500
// 10		150		2250	33750	506250

func TestDay12Phase2(t *testing.T) {
	// 525152
	computePermutations(lightInput, 1)
	computePermutations(lightInput, 5)
	// 6555315065024
	computePermutations(largeInput, 1)
	computePermutations(largeInput, 5)
}
